<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mario Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col items-center min-h-screen">

  <!-- Header -->
  <header class="w-full bg-green-700 text-white py-4 text-center font-bold text-2xl shadow-lg">
    Welcome to Mario Calculator
  </header>

  <!-- Navigation Bar -->
  <nav class="w-full bg-green-600 text-white shadow flex justify-center">
    <button 
      class="flex-1 text-center py-3 font-semibold hover:bg-green-700 focus:outline-none active:bg-green-800" 
      onclick="showTab('general')"
    >
      General
    </button>
    <button 
      class="flex-1 text-center py-3 font-semibold hover:bg-green-700 focus:outline-none active:bg-green-800" 
      onclick="showTab('emi')"
    >
      EMI
    </button>
    <button 
      class="flex-1 text-center py-3 font-semibold hover:bg-green-700 focus:outline-none active:bg-green-800" 
      onclick="showTab('age')"
    >
      Age
    </button>
  </nav>

  <!-- Main Container -->
  <div class="w-full max-w-3xl bg-white p-6 mt-0 rounded-lg shadow-lg">
    <!-- General Calculator -->
    <div id="general" class="tab-content block">
      <h2 class="text-xl font-bold mb-4">General Calculator</h2>
      <input 
        type="text" 
        inputmode="numeric" 
        id="expression" 
        placeholder="Enter expression (e.g., 5+5*2)" 
        class="w-full px-4 py-2 border rounded-lg mb-4 focus:ring focus:ring-green-300"
      />
      <button 
        class="w-full bg-blue-500 text-white py-2 rounded-lg font-semibold hover:bg-blue-600"
        onclick="calculateExpression()"
      >
        Calculate
      </button>
      <div id="generalResult" class="mt-4 p-3 bg-gray-100 border rounded-lg">Result: 0</div>
      <button 
        class="mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600" 
        onclick="toggleHistory('generalHistory')"
      >
        History
      </button>
      <ul id="generalHistory" class="hidden mt-4 bg-gray-200 p-4 rounded-lg max-h-40 overflow-y-auto"></ul>
    </div>

    <!-- EMI Calculator -->
    <div id="emi" class="tab-content hidden">
      <h2 class="text-xl font-bold mb-4">EMI Calculator</h2>
      <input 
        type="number" 
        id="loanAmount" 
        placeholder="Loan Amount" 
        class="w-full px-4 py-2 border rounded-lg mb-4 focus:ring focus:ring-green-300"
      />
      <input 
        type="number" 
        id="interestRate" 
        placeholder="Annual Interest Rate (%)" 
        class="w-full px-4 py-2 border rounded-lg mb-4 focus:ring focus:ring-green-300"
      />
      <input 
        type="number" 
        id="tenure" 
        placeholder="Tenure (Years)" 
        class="w-full px-4 py-2 border rounded-lg mb-4 focus:ring focus:ring-green-300"
      />
      <button 
        class="w-full bg-red-500 text-white py-2 rounded-lg font-semibold hover:bg-red-600"
        onclick="calculateEMI()"
      >
        Calculate EMI
      </button>
      <div id="emiResult" class="mt-4 p-3 bg-gray-100 border rounded-lg"></div>
      <button 
        class="mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600" 
        onclick="toggleHistory('emiHistory')"
      >
        History
      </button>
      <ul id="emiHistory" class="hidden mt-4 bg-gray-200 p-4 rounded-lg max-h-40 overflow-y-auto"></ul>
    </div>

    <!-- Age Calculator -->
    <div id="age" class="tab-content hidden">
      <h2 class="text-xl font-bold mb-4">Age Calculator</h2>
      <input 
        type="date" 
        id="birthDate" 
        class="w-full px-4 py-2 border rounded-lg mb-4 focus:ring focus:ring-green-300"
      />
      <button 
        class="w-full bg-purple-500 text-white py-2 rounded-lg font-semibold hover:bg-purple-600"
        onclick="calculateAge()"
      >
        Calculate Age
      </button>
      <div id="ageResult" class="mt-4 p-3 bg-gray-100 border rounded-lg"></div>
      <button 
        class="mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600" 
        onclick="toggleHistory('ageHistory')">
        History
      </button>
      <ul id="ageHistory" class="hidden mt-4 bg-gray-200 p-4 rounded-lg max-h-40 overflow-y-auto"></ul>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w-full bg-green-700 text-white text-center py-4 mt-0 shadow-lg">
  Powered by Saiful Islam Sumir. 
  <a 
    href="https://wa.me/+8801732484884" 
    class="underline text-white hover:text-green-300" 
    target="_blank" 
    rel="noopener noreferrer"
  >
    <i class="fab fa-whatsapp"></i>
  </a>
</footer>

<!-- Make sure Font Awesome is included -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <script>
    let histories = {
      general: [],
      emi: [],
      age: []
    };

    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
      document.getElementById(tabId).classList.remove('hidden');
    }

    function calculateExpression() {
      const expression = document.getElementById('expression').value;
      if (!expression) {
        document.getElementById('generalResult').innerText = `Result: 0`;
        return;
      }
      try {
        const result = eval(expression);
        document.getElementById('generalResult').innerText = `Result: ${result}`;
        updateHistory('general', `Expression: ${expression}, Result: ${result}`);
      } catch (error) {
        alert('Invalid Expression');
      }
    }

    function calculateEMI() {
      const loanAmount = parseFloat(document.getElementById('loanAmount').value);
      const interestRate = parseFloat(document.getElementById('interestRate').value) / 12 / 100;
      const tenure = parseFloat(document.getElementById('tenure').value) * 12;

      if (isNaN(loanAmount) || isNaN(interestRate) || isNaN(tenure) || loanAmount <= 0 || interestRate <= 0 || tenure <= 0) {
        alert('Please fill in all fields correctly.');
        return;
      }

      const EMI = (loanAmount * interestRate * Math.pow(1 + interestRate, tenure)) / (Math.pow(1 + interestRate, tenure) - 1);
      const totalInterest = (EMI * tenure - loanAmount).toFixed(2);
      const totalPayment = (EMI * tenure).toFixed(2);

      document.getElementById('emiResult').innerHTML = `
        <p><strong>EMI:</strong> ${EMI.toFixed(2)}</p>
        <p><strong>Total Interest:</strong> ${totalInterest}</p>
        <p><strong>Total Payment:</strong> ${totalPayment}</p>
      `;

      updateHistory('emi', `Loan: ${loanAmount}, EMI: ${EMI.toFixed(2)}, Total Interest: ${totalInterest}, Total Payment: ${totalPayment}`);
    }

    function calculateAge() {
      const birthDate = new Date(document.getElementById('birthDate').value);
      if (!birthDate.getTime()) {
        alert('Please select a valid date.');
        return;
      }

      const today = new Date();
      let years = today.getFullYear() - birthDate.getFullYear();
      let months = today.getMonth() - birthDate.getMonth();
      let days = today.getDate() - birthDate.getDate();

      if (days < 0) {
        months--;
        days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
      }

      if (months < 0) {
        years--;
        months += 12;
      }

      document.getElementById('ageResult').innerText = 
        `You are ${years} years, ${months} months, and ${days} days old.`;

      updateHistory('age', `Birthdate: ${birthDate.toDateString()}, Age: ${years} years, ${months} months, ${days} days`);
    }

    function updateHistory(type, record) {
      histories[type].unshift(record);
      if (histories[type].length > 10) histories[type].pop();

      const historyList = document.getElementById(`${type}History`);
      historyList.innerHTML = histories[type].map(item => `<li class='mb-2'>${item}</li>`).join('');
    }

    function toggleHistory(historyId) {
      const historyList = document.getElementById(historyId);
      historyList.classList.toggle('hidden');
    }
  </script>
</body>
</html>
